# ===================================================================
# AFFiNE Java Backend 环境变量配置示例
# Linux服务器生产环境部署配置
# ===================================================================
# 使用方法:
# 1. 复制此文件为 .env
# 2. 根据实际环境修改配置值
# 3. 使用 source .env 加载环境变量
# 4. 启动应用: java -jar affine-backend.jar --spring.profiles.active=server

# ===================================================================
# 服务器基础配置
# ===================================================================

# 服务器外部访问URL（必须修改为实际域名）
SERVER_EXTERNAL_URL=https://your-domain.com
SERVER_HTTPS_ENABLED=true

# ===================================================================
# 数据库配置（MySQL/PostgreSQL）
# ===================================================================

# MySQL配置示例
DATABASE_URL=jdbc:mysql://localhost:3306/affine?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=UTC
DATABASE_USERNAME=affine_user
DATABASE_PASSWORD=your_database_password

# PostgreSQL配置示例（可选）
# DATABASE_URL=jdbc:postgresql://localhost:5432/affine
# DATABASE_USERNAME=affine_user
# DATABASE_PASSWORD=your_database_password

# ===================================================================
# Redis配置
# ===================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# ===================================================================
# 存储配置
# ===================================================================

# 存储提供商: LOCAL, S3, R2, COS
STORAGE_PROVIDER=LOCAL

# 本地存储路径（Linux服务器）
STORAGE_SERVER_PATH=/opt/affine/storage
STORAGE_TEMP_PATH=/tmp/affine-uploads

# 云存储配置（如果使用S3/R2/COS）
# STORAGE_BUCKET=your-bucket-name
# STORAGE_REGION=us-east-1
# STORAGE_ACCESS_KEY_ID=your-access-key
# STORAGE_SECRET_ACCESS_KEY=your-secret-key
# STORAGE_ENDPOINT=https://your-endpoint.com
# STORAGE_PUBLIC_URL_PREFIX=https://your-cdn.com

# ===================================================================
# Socket.IO配置
# ===================================================================

SOCKETIO_PORT=9092

# ===================================================================
# AI配置（可选）
# ===================================================================

AI_ENABLED=true
OPENAI_ENABLED=true
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_BASE_URL=https://api.openai.com/v1

# DeepSeek配置示例
# OPENAI_MODEL=deepseek-chat
# OPENAI_BASE_URL=https://api.deepseek.com/v1

# ===================================================================
# 支付配置（可选）
# ===================================================================

PAYMENT_ENABLED=false
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# ===================================================================
# 认证配置
# ===================================================================

# JWT密钥（必须修改为随机字符串）
JWT_SECRET=your_super_secret_jwt_key_please_change_this_in_production

# ===================================================================
# OAuth配置（可选）
# ===================================================================

# Google OAuth
GOOGLE_OAUTH_ENABLED=false
# GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth
GITHUB_OAUTH_ENABLED=false
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret

# ===================================================================
# 邮件配置（可选）
# ===================================================================

EMAIL_ENABLED=false
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=your-email@gmail.com
# MAIL_PASSWORD=your-app-password
# MAIL_FROM=noreply@your-domain.com

# ===================================================================
# 部署说明
# ===================================================================

# 1. 创建存储目录:
#    sudo mkdir -p /opt/affine/storage
#    sudo mkdir -p /tmp/affine-uploads
#    sudo chown -R affine:affine /opt/affine/storage
#    sudo chmod 755 /opt/affine/storage

# 2. 创建日志目录:
#    sudo mkdir -p /var/log/affine
#    sudo chown -R affine:affine /var/log/affine

# 3. 数据库初始化:
#    mysql -u root -p < src/main/resources/db/affine.sql

# 4. 启动命令:
#    java -jar affine-backend.jar --spring.profiles.active=server

# 5. 系统服务配置（systemd）:
#    sudo cp affine-backend.service /etc/systemd/system/
#    sudo systemctl enable affine-backend
#    sudo systemctl start affine-backend